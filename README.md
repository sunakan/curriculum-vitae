# 職務経歴書

## 基本情報

|key|value|
|---|-----|
|Name|sunakan|
|Lapras|[sunakan](https://lapras.com/public/ZQTTQGP)|
|GitHub|[sunakan](https://github.com/sunakan)|
|Scrapbox|[sunabako](https://scrapbox.io/sunabako/)|

## 強み

- 技術を学ぶことが好きで、日常的にキャッチアップをしています。
- 人に教えることが好きです。
  - 仲の良い人たちで、[Vagrantによる環境構築](https://github.com/sunakan/vagrant-tips)のハンズオンを開きました
  - モクモク会に参加した人が困っていたら積極的に教えるようにしています
- 1人でWebサイトの構築・運用・保守・改善の経験があり、フルスタックな経験があります。

## スキル

※実務経験があるスキルを列挙しています

### 言語

- Ruby
- Bash
- Java
- JavaScript
- CoffeeScript
- Groovy
- C#
- 日本語
  - ネイティブ
- 英語
  - ドキュメントが読める程度

### フレームワークやライブラリ

|key|value|
|:---|:---|
|バックエンド|Ruby on Rails / Grails / Sinatra / Padrino|
|フロントエンド|jQuery / d3.js / Bootstrap|
|デスクトップアプリ|JavaFX|
|モバイルアプリ|Unity|

### その他

|key|value|
|:---|:---|
|全般|GitHub / Docker / Makefile / Redmine / Slack|
|RDB/NoSQL|MySQL / SQLServer / Redis|
|ミドルウェア系|Solr / Fluentd / Nginx|
|DevOps・監視系|Jenkins / Webistrano|
|クラウド|ECS / CloudFront / S3 / Terraform|

## 目指したいエンジニア像

- SRE業務やバックエンドのスペシャリストとして活躍しつつ、後進の育成もできるエンジニア

## 実務でやったことはないが興味があるもの

|value|
|:---|
|Argo Workflowを使ったバッチ基盤の作成|
|クラウドネイティブなCI/CD基盤の構築|
|k8sの導入・運用|
|AWSマルチアカウント運用|
|DDDでのチーム開発|
|クリーンアーキテクチャを採用したチーム開発|
|Elmによるフロントエンド開発|
|Rust/Golangによるバックエンド開発|
|継続的な負荷テストと可視化|
|ペアプロ・モブプロ・コードレビュー|

## 主な職務経歴

### キャンペーンページ（2020/11 - 2020/12）

|項目|内容|
|:---|:---|
|概要|購入者の所属が定期的にわかるキャンペーンページの作成|
|担当業務|要件定義、詳細設計、開発、デプロイ|
|技術スタック|Grails/Groovy/Ruby/Ruby on Rails/Javascript/jQuery|

#### 詳細

- toB案件
- 10月末開始で1度11月末までに第1リリースする必要があった

```
ヒアリング開始前に、概要だけさくっと聞いていた。
その事前説明の概要から自分なりの図を作成し、それをベースに話を聞くことで、1回目のミーティングを濃く進めることができた。
システム側の認識とPO側の認識のズレを発見できたので、それを修正する案を出した。
キックオフ前にwikiに書いて、開発者が困った時要件を確認しやすいようにした。
QAを含めて事前に見積もりをし、2週間を1イテレーションとしてプロジェクトを回した。
バーンダウンチャートを常にPOに共有しながら、スピード感を持って開発を進められた。
```

#### 直面した課題

-  メインで触るRailsがserviceとして定義しているAPIクライアント系のほとんどが返り値にHashie::Mashを使っており、ものすごく追いにくい。（どういう形のjsonかがcallしないとわからないことに加えて、しかも構造が動的だったりもする）
- ちょくちょくエラーが握りつぶされてnilが返っていたり、空配列が返っていたりしていた。(過去の自分もやっていたかもしれない）
- 関わるサブプロダクトの方のREADMEがゼロだった

#### どのように解決したか

- 状況を打破するべく、今回用意するAPIにはクライアント専用のエラーモデル、API用のクラスを別途作成した。例外処理も逐一投げるような処理にした。
- 初めて触る人がすぐに開発に着手できるよう、READMEを記述した。

### 他社ウェブサイトのリニューアル(2020/10 - 2020/12)

|項目|内容|
|:---|:---|
|概要|他社さんのウェブサイトの外注先とリプレイス元のインテグレーションとキャンペーサイト構築|
|担当業務|アーキテクチャ設計、AWSを使ったソリューションの調査・実践、開発環境構築|
|技術スタック|Docker/Lightsail/CloudFront/ALB/S3/Terraform|

#### 詳細

```
CloudFront専用のALBにする時のTipsは有益な情報としてPMから評価してもらった
別会社さんがかなりのボトルネックだったが、こちらでできることは可能な限り検証と手順書作成。
アーキテクチャ図を書いて、認識の共有（すり合わせ）を図った。
案１（CloudFront利用案）は事前にふんわりとしていたが、それが可能かどうかを検証をした。
その際に課題はそこそこ出たが、全て解決できた。
また、今回の解決策を実施するにあたって、他の会社さんにしてほしいことをスクショ付きで手順書に落とし込み、提出した
案1が何かしらの理由でダメだった時のために、別の案（VPCピアリング利用）の検証も行っておいた（今のところ案1でうまくいきそう）

また、今回の件でやろうとしていることが割と特殊だと思ったので、自分が検証した内容と、今回この方法を採用する予定という事例を社内の雑談会で共有した。
```

#### 直面した課題

- 複数のベンダが関わっており、関係者が同じ1つの完成図を共有できてない状況があった
- 技術的にかなり課題のあるベンダさんがボトルネックだった
- テスト環境・STG環境はIP制限、本番環境だけWAFが特殊など後出しで出てくる課題があった
- 何かしらAWSを使って解決しないといけない課題があった時、詳しい人が社内外にもいなかった

#### どのように解決したか

- 他社さんのAWSを考慮したアーキテクチャ図を用意し、共有した
- 手順書を作成して共有した
- 個人アカウントである程度再現して、すぐに対応した
- 実務での経験が浅くても、普段からキャッチアップしていたので、ソリューションを予備を含めて提案し、対応した

### WordPressプロジェクトの基盤アーキテクチャ設計(2020/9 - 2020/10)

|項目|内容|
|:---|:---|
|概要|WordPressを使ったプロダクトのアーキテクチャの検討と見積もり|
|担当業務|アーキテクチャ設計、見積もり|
|技術スタック|WordPress/Fluentd/Lightsail/S3/ALB/Route53/ECS/CloudFront/EC2/Kinesis DataFirehose/RDS/EFS|

#### 詳細

```
ヒアリングを行い、実際にサンプルを見てみると「行動履歴」を同期的にRDBに保存するような挙動になっていたので、技術的にもよりbetterでCPU負荷も下がって費用的にも抑えられる提案をした。
LightsailというAWSが提供するVPSの利用も積極的に考えたが、それを使ったときのデメリット等も共有できた（特にCPUバースト関連）

アーキテクチャ図を都度作成し、それを共有・プレゼンを結構な頻度で行い、PMに理解を少しずつしてもらった。
更に、AWSの見積もりの面倒くささやどうしたほうがいいのかという仮説も交えて社内で行った雑談会で調査結果を共有した。
```

### 古いプロジェクトのDocker化(2020/9 - 2020/10)

|項目|内容|
|:---|:---|
|概要|チームが持つプロジェクトをDocker化しておいて開発環境構築DXを良くする|
|担当業務|Dockerfileのチーム独自のルール提案、docker build～保存するまでのチーム独自のフローの提案、いくつかのプロジェクトをDocker化|
|技術スタック|Docker/Ruby/Ruby on Rails/Padrino/Sinatra/Grails/Groovy/Jenkins|

#### 詳細

```
チーム目標を立てた時点では、「チームが持ってるプロジェクトをDocker化する」というだけで、どのようにするかは決まっていなかった。
それを実際に実行するにあたって、Teamで統一性を持たせるために決めるべき事項が多かった。
実際に組もうとしてみて、課題を洗い出し、共通化させた方が理解が速そうな部分を積極的に発言と提案をした。
また、仮に共通化したい場合だとこういう風リポジトリ構成をするのはどうか、説明だけではイメージしにくいだろうと思った（ピンとこないだろうなと思った）ので、実際にRubyだけでもリポジトリを作って、大変さやメンテしていくイメージも共有した。（https://github.com/sunakan/ruby-docker）
（チームで統一性を持たせたい理由：チームの中で個人個人が考えてそれぞれのベストプラクティスでやった場合、次の人が入ってきたとき困惑するだろうし、1つ1つの説明にも困る。属人化の排除にもつながる）
例：
「Dockerfileは何をBaseImageにするのか。debianか、チームで作るオリジナルか」
「ruby 2.4等で共通化したいなら、別途専用リポジトリを作るべきであるし、そうでないなら、特定のリポジトリで作ったbaseimageを他で使いまわさない等（どこで作られたかどうかわからなくなるため）」
「Dockerfile.development等複数ファイルにするのか、マルチステージングビルドにするのか」
「ステージングビルドの時のそれぞれのステージ名」
「既存のDockerfileはどうするのか」
「Jenkinsでのスクリプトはmake build && make xxxxとかにするなど、タスク名の統一等」
```

### バナー管理改修(2020/7 - 2020/9)

|項目|内容|
|:---|:---|
|概要|商品ページのバナーの管理方法の改修と、文言の出し入れロジックの改修|
|担当業務|文言自体の変更と出し入れロジックの変更、出し入れロジックをモデルから剥がす|
|技術スタック|Ruby/Ruby on Rails/Docker|

### カテゴリ・ランキングページ改修(2020/3 - 2020/6)

|項目|内容|
|:---|:---|
|概要|カテゴリページとランキングページの統合とUIの変更|
|担当業務|改修担当箇所の要件定義、開発（取得する商品情報のモデルの改修、ビジネスロジックをモデルから剥がす）|
|技術スタック|Ruby/ActiveRecord/Docker/Bash(Makefile)/Jenkins|

#### 詳細

```
担当個所においては、かなり要件がふわふわしていた。
しかしさっと修正し、見てもらい、違和感があり修正したかったら修正していくというアジャイルらしい方法ですすめられた。
```

### バッチ改修(2020/4 - 2020/7)

|項目|内容|
|:---|:---|
|概要|他社さんが触るDBのやり取りするバッチの1つを改修|
|担当業務|フロー設計、詳細設計、CD基盤構築|
|技術スタック|Ruby/ActiveRecord/Docker/Bash(Makefile)/Jenkins|

### ログ収集基盤のリプレイス(2020/1 - 2020/2)

|項目|内容|
|:---|:---|
|概要|古いコンテンツ検索のシステムの冗長化やインデックスのフローの設計・開発|
|担当業務|アーキテクチャ設計、詳細設計、実装、デプロイフローの確立|
|技術スタック|Fluentd/ECS/S3/Athena/Terraform/Docker|

#### 詳細

```
ログの収集基盤をCassandraから、FluentdでS3に置くようにした。
初めてのECSでTerraformにもチャレンジして、積極的にキャッチアップを行い、会社のプロダクトのIaC化に貢献した。
```

### コンテンツ検索システムのリプレイス（途中まで）( 2019/6 - 2020/1)

|項目|内容|
|:---|:---|
|概要|古いコンテンツ検索のシステムの冗長化やインデックスのフローの設計・開発|
|担当業務|アーキテクチャ設計、詳細設計、実装|
|技術スタック|Solr/Java/Docker/AWS SQS/digadag|

#### 詳細

既存のSolrシステムでは以下の2つの大きな課題がありました。

- 3,4年以上メンテされていない（Localで再現可能な仕組みもなかった）
- 冗長化されておらず、単一障害となっている

上記の課題を以下の手段で解決を図ろうとしました。

- (A) コンテナ化することで、ポータビリティ向上と開発環境構築の容易性を実現
- (B) スタンドアロンのSolrを複数用意し、LBで負荷分散をし、冗長化を図る

(A)を解決策として選択した理由

- 後々に引き継ぐ人にとって環境構築を楽にするため
- コンテナの本番利用を目指すことで、Localと本番環境との差異を小さくするため

(B)を解決策として選んだ理由

- Solrのバージョン自体が古く、Solrクラウドにするにも結構な調査が必要だったため、スタンドアロンなSolrを複数用意する選択をした。
- 既存システムがオンプレにあったので、まずはクラウドに持っていくことを目標にして小さく回してくことを目指した。

#### 直面した課題

- 複数のスタンドアロンのSolrのindexデータの同期方法
- パフォーマンステストが異常に悪く、先輩方に聞いてもわからない状況があった

#### どのように解決したか

- 事前にindexデータを作成し、indexデータだけをrsync/mvで挿げ替える作戦を取った
- dockerのデータ永続化方法のvolume bindが原因だったため、docker volumeを利用するにようにした
