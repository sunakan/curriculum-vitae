# 職務経歴書

## 目指したいエンジニア像

- SREやバックエンドのスペシャリストとして会社の基盤やシステム全体を支えるエンジニア
- 身につけた知識をチームにフィードバックして、周囲と一緒に成長していくエンジニア

## 強み

- 自走力と継続力があります
  - 主体的にテーマを持って技術習得を行っており、日々キャッチアップを欠かしません
  - 会社の勤務制度を利用して、朝6時出社、15時退社し、その後を時間を日々自習時間に充てています
  - 2019年の後半は約週4,5の頻度で勉強会に参加しておりました
    - コロナ禍でも、オンライン勉強会に参加し、仲の良い人たちで週1で9:00-17:00で勉強会をしています
- 利他意識が強めです
  - 学んだ技術を積極的に周囲に共有することに積極的です
  - 勉強会等の自由参加の場でも、疑問や質問をこちらから掘り出し積極的に知識共有します
  - もともと教師を目指していたことをあるくらい、人に教えることが好きです
    - 例として、Vagrantという[環境構築のツールのハンズオン](https://github.com/sunakan/vagrant-tips)を開きました。効果として、参加者が各自必要な環境を自力でVagrantfileを作成し、構築できる知識習得に貢献
- インフラ〜バックエンド〜フロントエンド、且つ構築・運用・保守・改善の経験があります
  - フルスタックの対応ができ、どのフェーズ、ポジションでアサインされても、全体を考慮して構築、設計を行うことができます

## こんなことやりたい・興味がある！

|value|
|:---|
|ペアプロ・モブプロ・コードレビュー|
|DDDでのチーム開発|
|クリーンアーキテクチャを採用したチーム開発|
|AWSマルチアカウントの設計と運用|
|クラウドネイティブなCI/CD基盤の構築|
|k8sの導入・運用|
|バッチ基盤の作成|
|継続的な負荷テストと可視化|
|Rust/Golangによるバックエンド開発|
|Elmによるフロントエンド開発|

## 基本情報

Name: sunakan

|アウトプット|リンク|概要|
|:---|:---|:---|
|Lapras|[sunakan](https://lapras.com/public/ZQTTQGP)|ざっくりとした自分のアウトプットのまとめリンク集として使っています|
|GitHub|[sunakan](https://github.com/sunakan)|簡単なものでもとりあえずコミットとして残しています|
|Scrapbox|[sunabako](https://scrapbox.io/sunabako/)|自分のメモ書きとして利用しています|

## スキル

※実務経験があるスキルを列挙しています

### 言語

- Ruby
- Bash
- Java
- JavaScript
- CoffeeScript
- Groovy
- C#
- 日本語
  - ネイティブ
- 英語
  - ドキュメントが読める程度

### フレームワークやライブラリ

|key|value|
|:---|:---|
|バックエンド|Ruby on Rails / Grails / Sinatra / Padrino|
|フロントエンド|jQuery / d3.js / Bootstrap|
|デスクトップアプリ|JavaFX|
|モバイルアプリ|Unity|

### その他

|key|value|
|:---|:---|
|全般|GitHub / Docker / Makefile / Redmine / Slack|
|RDB/NoSQL|MySQL / SQLServer / Redis|
|ミドルウェア系|Solr / Fluentd / Nginx|
|DevOps・監視系|Jenkins / Webistrano|
|クラウド|ECS / CloudFront / S3 / Terraform|


## 主な職務経歴

### 自社サイトへのチャネルを増やす（2020/11 - 2020/12）

|項目|内容|
|:---|:---|
|期間|2020/11 - 2020/12|
|概要|他社さんのサイトに自社サイトのキャンペーンページへのリンクを貼ってもらい、購入があった分だけ報酬を払う。そのために特定の期間内にどれだけ購入があったかをトラッキングできるような仕組みを作り、メールで送付するまでのプロセスの自動化システムの作成|
|効果|自社サイトへの流入のチャネルを増やす。バックオフィスが報酬メールを定期的に送る手間をなくす。|
|特徴|短納期、toB案件|
|担当業務|要件定義、詳細設計、開発、デプロイ|
|技術スタック|Grails/Groovy/Ruby/Ruby on Rails/Javascript/jQuery|

#### 詳細

```
ヒアリング開始前に、概要だけさくっと聞いていました。
その事前説明の概要から自分なりの図を作成し、それをベースに話を聞くことで、1回目のミーティングを濃く進めることができました。
システム側の認識とPO側の認識のズレを発見できたので、それを修正する案を出しました。
キックオフ前にwikiに書いて、開発者が困った時要件を確認しやすいようにしました。
QAを含めて事前に見積もりをし、2週間を1イテレーションとしてプロジェクトを回しました。
バーンダウンチャートを常にPOに共有しながら、スピード感を持って開発を進められました。
```

#### 直面した課題

|直面した課題|どのように解決したか|
|:---|:---|
|メインで触るRailsプロダクトに実装されているAPIクライアント系のほとんどが返ってきたJSONデータをそのまま使いまわしており、ものすごく追いにくい状況にありました。（ドキュメント等が無く、どういう形のjsonかがcallしないとわからないことに加えて、更にデータ構造が動的でした。）|状況を打破するべく、今回用意するAPIクライアントにはクライアント専用のエラーモデル、返ってきたjsonデータを専用のデータクラスに置きなおすような仕組みを導入しました。|
|関わるサブプロダクトの方はREADME等のドキュメントがない状況でした。|今回の経験を通して、初めて触る人がすぐに開発に着手できるよう、READMEを記述しました。|

### 他社ウェブサイトのリニューアル(2020/10 - 2020/12)

|項目|内容|
|:---|:---|
|概要|他社さんのウェブサイトの外注先とリプレイス元のインテグレーションとキャンペーサイト構築|
|担当業務|アーキテクチャ設計、AWSを使ったソリューションの調査・実践、開発環境構築|
|技術スタック|Docker/Lightsail/CloudFront/ALB/S3/Terraform|

#### 詳細

```
CloudFront専用のALBにする時のTipsは有益な情報としてPMから評価してもらった
別会社さんがかなりのボトルネックだったが、こちらでできることは可能な限り検証と手順書作成。
アーキテクチャ図を書いて、認識の共有（すり合わせ）を図った。
案１（CloudFront利用案）は事前にふんわりとしていたが、それが可能かどうかを検証をした。
その際に課題はそこそこ出たが、全て解決できた。
また、今回の解決策を実施するにあたって、他の会社さんにしてほしいことをスクショ付きで手順書に落とし込み、提出した
案1が何かしらの理由でダメだった時のために、別の案（VPCピアリング利用）の検証も行っておいた（今のところ案1でうまくいきそう）

また、今回の件でやろうとしていることが割と特殊だと思ったので、自分が検証した内容と、今回この方法を採用する予定という事例を社内の雑談会で共有した。
```

#### 直面した課題

- 複数のベンダが関わっており、関係者が同じ1つの完成図を共有できてない状況があった
- レスポンスや技術的に課題のあるベンダさんと一緒に開発をしておりました。
- テスト環境・STG環境はIP制限、本番環境だけWAFが特殊など後出しで出てくる課題がありました。
- 何かしらAWSを使って解決しないといけない課題があった時、詳しい人が社内外にもいませんでした。

#### どのように解決したか

- 他社さんのAWSを考慮したアーキテクチャ図を用意し、共有しました。
- 手順書を作成して共有しました。
- 個人アカウントである程度再現して、すぐに対応しました。
- 実務での経験が浅くても、普段から積極的にキャッチアップしていたので、解決策を提案し、対応しました。

### WordPressプロジェクトの基盤アーキテクチャ設計(2020/9 - 2020/10)

|項目|内容|
|:---|:---|
|概要|WordPressを使ったプロダクトのアーキテクチャの検討と見積もり|
|担当業務|アーキテクチャ設計、見積もり|
|技術スタック|WordPress/Fluentd/Lightsail/S3/ALB/Route53/ECS/CloudFront/EC2/Kinesis DataFirehose/RDS/EFS|

#### 詳細

```
ヒアリングを行い、実際にサンプルを見てみると「行動履歴」を同期的にRDBに保存するような挙動になっていたので、技術的にもよりbetterでCPU負荷も下がって費用的にも抑えられる提案をしました。
LightsailというAWSが提供するVPSの利用も積極的に考えたが、それを使ったときのデメリット等も共有しました（特にCPUバースト関連）

アーキテクチャ図を都度作成し、それを共有・プレゼンを結構な頻度で行い、PMに理解を少しずつしてもらいました。
更に、AWSの見積もりの面倒くささやどうしたほうがいいのかという仮説も交えて社内で行った雑談会で調査結果を共有しました。
```

### 古いプロジェクトのDocker化(2020/9 - 2020/10)

|項目|内容|
|:---|:---|
|概要|チームが持つプロジェクトをDocker化しておいて開発環境構築DXを良くする|
|担当業務|Dockerfileのチーム独自のルール提案、docker build～保存するまでのチーム独自のフローの提案、いくつかのプロジェクトをDocker化|
|技術スタック|Docker/Ruby/Ruby on Rails/Padrino/Sinatra/Grails/Groovy/Jenkins|

#### 詳細

```
チーム目標を立てた時点では、「チームが持ってるプロジェクトをDocker化する」というだけで、どのようにするかは決まっていませんでした。
それを実際に実行するにあたって、チームで統一性を持たせるために決めるべき項目がたすうありました。
実際に組もうとしてみて、課題を洗い出し、共通化させた方が理解が速そうな部分を積極的に発言と提案をしました。
また、仮に共通化したい場合だとこういう風リポジトリ構成をするのはどうか、説明だけではイメージしにくいだろうと思った（ピンとこないだろうなと思った）ので、実際にRubyだけでもリポジトリを作って、大変さやメンテしていくイメージも共有しました。（https://github.com/sunakan/ruby-docker）
（チームで統一性を持たせたい理由：チームの中で個人個人が考えてそれぞれのベストプラクティスでやった場合、次の人が入ってきたとき困惑する。さらに1つ1つの説明にも困る。属人化の排除にもつながる）

例：
「Dockerfileは何をBaseImageにするのか。debianか、チームで作るオリジナルか」
「ruby 2.4等で共通化したいなら、別途専用リポジトリを作るべきであるし、そうでないなら、特定のリポジトリで作ったbaseimageを他で使いまわさない等（どこで作られたかどうかわからなくなるため）」
「Dockerfile.development等複数ファイルにするのか、マルチステージングビルドにするのか」
「ステージングビルドの時のそれぞれのステージ名」
「既存のDockerfileはどうするのか」
「Jenkinsでのスクリプトはmake build && make xxxxとかにするなど、タスク名の統一等」
```

### バナー管理改修(2020/7 - 2020/9)

|項目|内容|
|:---|:---|
|概要|商品ページのバナーの管理方法の改修と、文言の出し入れロジックの改修|
|担当業務|文言自体の変更と出し入れロジックの変更、出し入れロジックをモデルから剥がす|
|技術スタック|Ruby/Ruby on Rails/Docker|

### カテゴリ・ランキングページ改修(2020/3 - 2020/6)

|項目|内容|
|:---|:---|
|概要|カテゴリページとランキングページの統合とUIの変更|
|担当業務|改修担当箇所の要件定義、開発（取得する商品情報のモデルの改修、ビジネスロジックをモデルから剥がす）|
|技術スタック|Ruby/ActiveRecord/Docker/Bash(Makefile)/Jenkins|

#### 詳細

```
担当個所においては、かなり要件がふわふわしていました。
さっと修正し、見てもらい、違和感があり修正したかったら修正していくというアジャイルらしい方法で進めました。
```

### バッチ改修(2020/4 - 2020/7)

|項目|内容|
|:---|:---|
|概要|他社さんが触るDBのやり取りするバッチの1つを改修|
|担当業務|フロー設計、詳細設計、CD基盤構築|
|技術スタック|Ruby/ActiveRecord/Docker/Bash(Makefile)/Jenkins|

### ログ収集基盤のリプレイス(2020/1 - 2020/2)

|項目|内容|
|:---|:---|
|概要|古いコンテンツ検索のシステムの冗長化やインデックスのフローの設計・開発|
|担当業務|アーキテクチャ設計、詳細設計、実装、デプロイフローの確立|
|技術スタック|Fluentd/ECS/S3/Athena/Terraform/Docker|

#### 詳細

```
ログの収集基盤をCassandraから、FluentdでS3に置くようにしました。
初めてのECSでTerraformにもチャレンジして、積極的にキャッチアップを行い、会社のプロダクトのIaC化に貢献しました。
```

### コンテンツ検索システムのリプレイス（途中まで）( 2019/6 - 2020/1)

|項目|内容|
|:---|:---|
|概要|古いコンテンツ検索のシステムの冗長化やインデックスのフローの設計・開発|
|担当業務|アーキテクチャ設計、詳細設計、実装|
|技術スタック|Solr/Java/Docker/AWS SQS/digadag|

#### 詳細

既存のSolrシステムでは以下の2つの大きな課題がありました。

- 3,4年以上メンテされていない状況となっておりました。（Localで再現可能な仕組みもない状況でした）
- 冗長化されておらず、単一障害となっていました。

上記の課題を以下の手段で解決を図ろうとしました。

- (A) コンテナ化することで、ポータビリティ向上と開発環境構築の容易性を実現
- (B) スタンドアロンのSolrを複数用意し、LBで負荷分散をし、冗長化を図る

(A)を解決策として選択した理由

- 後々に引き継ぐ人にとって環境構築を楽にするため
- コンテナの本番利用を目指すことで、Localと本番環境との差異を小さくするため

(B)を解決策として選んだ理由

- Solrのバージョン自体が古く、Solrクラウドにするにも結構な調査が必要だったため、スタンドアロンなSolrを複数用意する選択をしました。
- 既存システムがオンプレにあったので、まずはクラウドに持っていくことを目標にして小さく回してくことを目指しました。

#### 直面した課題

- 複数のスタンドアロンのSolrのindexデータの同期方法。
- パフォーマンステストが異常に悪く、先輩方に聞いてもわからない状況がありました。

#### どのように解決したか

- 事前にindexデータを作成し、indexデータだけをrsync/mvで挿げ替える作戦を採用しました。
- dockerのデータ永続化方法のvolume bindが原因だったため、docker volumeを利用するにようにしました。
